<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Emna Naturals - Premium Organic Beauty Products</title>
<meta name="description" content="Emna Naturals - premium organic beauty products" />
<link rel="icon" href="https://dhgf5mcbrms62.cloudfront.net/63685003/image-text-YC6qDi/MupaLBK-200x200.jpg" type="image/png">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<!-- Ecwid main script (store id 63685003) -->
<script data-cfasync="false" src="https://app.ecwid.com/script.js?63685003&data_platform=code" charset="utf-8"></script>
<script>
  // Ecwid product browser init
  window.ecwid_script_defer = true;
  window.ecwid_dynamic_widgets = true;
  window._xnext_initialization_scripts = [{
    widgetType: 'ProductBrowser',
    id: 'my-store-63685003',
    arg: [
      "categoriesPerRow=3",
      "views=grid(20,3) list(60) table(60)",
      "categoryView=grid",
      "responsive=yes"
    ]
  }];
</script>

<style>
  /* ---------- Base ---------- */
  *{box-sizing:border-box;margin:0;padding:0}
  :root{
    --primary:#1a3b2e; --accent:#d4af37; --bg:#faf8f5; --muted:#6e6e6e;
  }
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;color:#222;background:var(--bg);line-height:1.6;overflow-x:hidden}
  .container{max-width:1200px;margin:0 auto;padding:0 20px}

  /* ---------- Header ---------- */
  header{position:fixed;top:0;left:0;right:0;z-index:1200;background:rgba(255,255,255,0.92);backdrop-filter:blur(8px);border-bottom:1px solid rgba(26,59,46,0.06)}
  nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
  .logo{font-family:'Playfair Display',serif;font-size:1.45rem;color:var(--primary);cursor:pointer}
  .nav-center{display:flex;gap:1.5rem;align-items:center}
  .nav-center a{color:#222;text-decoration:none;font-weight:500}
  .nav-right{display:flex;align-items:center;gap:12px}
  .cart-button{position:relative;background:var(--primary);color:#fff;border:none;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:.5rem}
  .cart-count{position:absolute;top:-8px;right:-8px;background:var(--accent);color:var(--primary);width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:.75rem;border:2px solid #fff}
  .cart-count.hidden{display:none}

  /* ---------- Hero ---------- */
  .hero{min-height:78vh;display:flex;align-items:center;padding-top:80px;background:linear-gradient(135deg,#fcfbfa,#f6f7f3)}
  .hero-inner{display:grid;grid-template-columns:1fr 1fr;gap:2.5rem;align-items:center}
  .hero h1{font-family:'Playfair Display',serif;color:var(--primary);font-size:clamp(2rem,4vw,3.2rem)}
  .subtitle{color:var(--muted);margin-top:.6rem}

  /* ---------- Products ---------- */
  .products{padding:4.5rem 0;background:#fff}
  #my-store-63685003{margin-top:10px}

  .spinner{width:48px;height:48px;border-radius:50%;border:4px solid #eef6ef;border-top-color:var(--primary);animation:spin 1s linear infinite;margin:0 auto}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* ---------- Contact ---------- */
  .contact{padding:3.5rem 0;background:var(--primary);color:#fff}
  .contact .card{background:rgba(255,255,255,0.06);padding:18px;border-radius:12px}

  /* ---------- Footer ---------- */
  footer{padding:1.5rem 0;text-align:center;color:#666;background:transparent;font-size:.95rem}

  /* ---------- Mini-cart drawer (blur + semi-transparent) ---------- */
  #miniCartOverlay{
    position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(4px);
    opacity:0;visibility:hidden;transition:opacity .28s ease,visibility .28s;z-index:1900;
  }
  #miniCartOverlay.active{opacity:1;visibility:visible}

  #miniCartDrawer{
    position:fixed;top:0;right:-440px;width:420px;max-width:95%;height:100vh;
    background:rgba(255,255,255,0.82);backdrop-filter:blur(8px) saturate(1.05);
    box-shadow:-12px 0 40px rgba(0,0,0,0.12);z-index:2000;transition:right .35s cubic-bezier(.2,.9,.2,1);
    display:flex;flex-direction:column;padding:18px 18px 28px;overflow-y:auto;
  }
  #miniCartDrawer.open{right:0}
  .close-drawer{background:none;border:none;font-size:1.3rem;color:var(--primary);cursor:pointer;align-self:flex-end}
  .mini-cart-items{margin-top:8px;display:flex;flex-direction:column;gap:12px}
  .mini-cart-item{display:flex;gap:12px;align-items:center;border-bottom:1px solid rgba(0,0,0,0.05);padding-bottom:12px;padding-top:6px}
  .mini-cart-thumb{width:56px;height:56px;border-radius:8px;object-fit:cover;flex-shrink:0;background:#f2f2f2}
  .mini-cart-item-info{flex:1}
  .mini-cart-item-info strong{display:block;color:var(--primary)}
  .mini-cart-subtotal{margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,0,0,0.06);font-weight:700;text-align:right;color:var(--primary)}
  .mini-cart-empty{color:#666;margin-top:14px;text-align:center}

  /* ---------- Responsive ---------- */
  @media(max-width:920px){
    .hero-inner{grid-template-columns:1fr}
    .nav-center{display:none}
    .cart-button span:not(.cart-count){display:none}
    #miniCartDrawer{width:92vw;right:-100vw}
  }
</style>
</head>
<body>
<header>
  <nav class="container">
    <div class="logo" onclick="window.scrollTo({top:0,behavior:'smooth'})">EMNA NATURALS</div>
    <div class="nav-center" role="navigation" aria-label="Main">
      <a href="#home">Home</a>
      <a href="#products">Products</a>
      <a href="#contact">Contact</a>
    </div>
    <div class="nav-right">
      <button id="cartButton" class="cart-button" aria-label="Open cart">
        <span class="cart-icon">üõí</span>
        <span class="cart-text">Cart</span>
        <span id="cartCount" class="cart-count hidden">0</span>
      </button>
    </div>
  </nav>
</header>

<main>
  <section id="home" class="hero container">
    <div class="hero-inner">
      <div>
        <h1>Pure Beauty, <span style="color:var(--accent)">Naturally Crafted</span></h1>
        <p class="subtitle">Transform your hair and skin with our premium organic products.</p>
      </div>
      <div style="text-align:center">
        <img src="https://dhgf5mcbrms62.cloudfront.net/63685003/image-text-YC6qDi/MupaLBK-200x200.jpg" alt="Product" style="width:260px;border-radius:16px;box-shadow:0 18px 40px rgba(26,59,46,0.06)">
      </div>
    </div>
  </section>

  <section id="products" class="products">
    <div class="container">
      <div style="text-align:center;margin-bottom:14px">
        <h2 style="font-family:Playfair Display,serif;color:var(--primary);font-size:1.9rem">Our Product Collection</h2>
        <p style="color:var(--muted)">Discover our range of premium organic beauty products</p>
      </div>

      <!-- Ecwid store -->
      <div id="my-store-63685003" aria-live="polite">
        <div style="text-align:center;padding:40px">
          <div class="spinner" aria-hidden="true"></div>
          <p style="color:var(--muted);margin-top:14px">Loading products‚Ä¶</p>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="contact">
    <div class="container">
      <h2 style="font-family:Playfair Display,serif;text-align:center;margin-bottom:12px">Get in Touch</h2>
      <div style="display:grid;grid-template-columns:1fr;gap:12px;max-width:720px;margin:0 auto">
        <div class="card" style="padding:16px;border-radius:12px;background:rgba(255,255,255,0.06)">
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="font-size:20px">üìç</div>
            <div>
              <strong>Address</strong><br>Greater London, United Kingdom
            </div>
          </div>
          <div style="height:12px"></div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="font-size:20px">üìß</div>
            <div><strong>Email</strong><br>hello@emnanaturals.com</div>
          </div>
          <div style="height:12px"></div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="font-size:20px">üì±</div>
            <div><strong>Phone</strong><br>+44 (0) 20 8567 1234</div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="container">
    <small>¬© 2025 Emna Naturals ¬∑ All rights reserved.</small>
  </div>
</footer>

<!-- Drawer & overlay -->
<div id="miniCartOverlay" aria-hidden="true"></div>

<aside id="miniCartDrawer" aria-hidden="true" role="dialog" aria-label="Shopping cart">
  <button id="closeCart" class="close-drawer" aria-label="Close cart">‚úï</button>
  <div id="mini-cart-content" style="min-height:40px"></div>
</aside>

<script>
/* ---------- Helpers ---------- */
function safeLog(){ try{ console.log.apply(console, arguments); } catch(e){} }

/* Update header badge */
function updateCartDisplay(cart){
  try{
    const el = document.getElementById('cartCount');
    const qty = (cart && (cart.productsQuantity || cart.productCount || 0)) || 0;
    if(qty > 0){ el.textContent = qty; el.classList.remove('hidden'); }
    else { el.classList.add('hidden'); }
  }catch(e){ safeLog('updateCartDisplay err', e) }
}

/* Wait for Ecwid availability (poll) */
function whenEcwidReady(cb, timeout = 8000){
  const start = Date.now();
  (function poll(){
    if(typeof Ecwid !== 'undefined' && Ecwid && Ecwid.Cart && typeof Ecwid.Cart.get === 'function'){
      try{ return cb(); } catch(e){ safeLog('whenEcwidReady cb err', e); return; }
    }
    if(Date.now() - start > timeout){
      safeLog('Ecwid not ready after', timeout, 'ms');
      return;
    }
    setTimeout(poll, 150);
  })();
}

/* Robust fetch: try multiple times until a non-empty cart or retries exhausted */
function fetchCartReliable(maxAttempts = 8, intervalMs = 350){
  return new Promise((resolve) => {
    let attempts = 0;
    function attempt(){
      attempts++;
      try {
        Ecwid.Cart.get(function(cart){
          // If cart has products OR we've exhausted attempts, resolve
          if( (cart && cart.products && cart.products.length > 0) || attempts >= maxAttempts ){
            resolve(cart || { products: [], productsQuantity: 0 });
          } else {
            setTimeout(attempt, intervalMs);
          }
        });
      } catch(err){
        safeLog('Ecwid.Cart.get threw', err);
        if(attempts >= maxAttempts) resolve({ products: [], productsQuantity: 0 });
        else setTimeout(attempt, intervalMs);
      }
    }
    attempt();
  });
}

/* Render cart into drawer */
function renderCartToDrawer(cart){
  const wrap = document.getElementById('mini-cart-content');
  wrap.innerHTML = '';
  const heading = document.createElement('h2');
  heading.style.fontFamily = 'Playfair Display, serif';
  heading.style.color = 'var(--primary)';
  heading.textContent = 'Your Cart';
  wrap.appendChild(heading);

  if(!cart || !Array.isArray(cart.products) || cart.products.length === 0){
    const p = document.createElement('p');
    p.className = 'mini-cart-empty';
    p.textContent = 'Your cart is empty.';
    wrap.appendChild(p);
    return;
  }

  const itemsWrap = document.createElement('div');
  itemsWrap.className = 'mini-cart-items';
  let subtotal = 0;

  cart.products.forEach(p => {
    const price = parseFloat(p.price) || 0;
    const qty = p.quantity || 1;
    subtotal += price * qty;

    const item = document.createElement('div');
    item.className = 'mini-cart-item';

    const info = document.createElement('div');
    info.className = 'mini-cart-item-info';

    const title = document.createElement('strong');
    title.textContent = p.name || 'Product';
    info.appendChild(title);

    const meta = document.createElement('div');
    meta.innerHTML = `<small>${qty} √ó ¬£${price.toFixed(2)}</small>`;
    info.appendChild(meta);

    const img = document.createElement('img');
    img.className = 'mini-cart-thumb';
    img.alt = p.name || 'Product';
    img.src = p.thumbnailUrl || p.image || '';

    item.appendChild(info);
    item.appendChild(img);
    itemsWrap.appendChild(item);
  });

  wrap.appendChild(itemsWrap);

  const subtotalEl = document.createElement('div');
  subtotalEl.className = 'mini-cart-subtotal';
  subtotalEl.textContent = `Subtotal: ¬£${subtotal.toFixed(2)}`;
  wrap.appendChild(subtotalEl);

  const checkoutWrap = document.createElement('div');
  checkoutWrap.style.textAlign = 'center';
  checkoutWrap.style.marginTop = '14px';
  const checkoutBtn = document.createElement('button');
  checkoutBtn.style.background = 'var(--primary)';
  checkoutBtn.style.color = '#fff';
  checkoutBtn.style.padding = '11px 18px';
  checkoutBtn.style.border = 'none';
  checkoutBtn.style.borderRadius = '10px';
  checkoutBtn.style.cursor = 'pointer';
  checkoutBtn.style.fontWeight = '700';
  checkoutBtn.textContent = 'Checkout';
  checkoutBtn.addEventListener('click', function(){
    try{ Ecwid.openPage('cart'); } catch(e){ window.open('https://emna-naturals.ecwid.com/cart','_blank'); }
  });
  checkoutWrap.appendChild(checkoutBtn);
  wrap.appendChild(checkoutWrap);
}

/* Drawer controls */
const drawer = document.getElementById('miniCartDrawer');
const overlay = document.getElementById('miniCartOverlay');
const cartBtn = document.getElementById('cartButton');
const closeBtn = document.getElementById('closeCart');

function openDrawer(){ drawer.classList.add('open'); overlay.classList.add('active'); drawer.setAttribute('aria-hidden','false'); overlay.setAttribute('aria-hidden','false'); document.documentElement.style.overflow='hidden'; document.body.style.overflow='hidden'; }
function closeDrawer(){ drawer.classList.remove('open'); overlay.classList.remove('active'); drawer.setAttribute('aria-hidden','true'); overlay.setAttribute('aria-hidden','true'); document.documentElement.style.overflow=''; document.body.style.overflow=''; }

closeBtn.addEventListener('click', closeDrawer);
overlay.addEventListener('click', closeDrawer);
document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeDrawer(); });

/* ---------- Attach Ecwid event handlers robustly ---------- */
whenEcwidReady(function(){
  try{
    // hook API loaded if available
    if(Ecwid.OnAPILoaded && typeof Ecwid.OnAPILoaded.add === 'function'){
      Ecwid.OnAPILoaded.add(function(){ try{ Ecwid.Cart.get(updateCartDisplay); } catch(e){ safeLog('OnAPILoaded Cart.get err', e); } });
    }

    // OnCartChanged
    if(Ecwid.OnCartChanged && typeof Ecwid.OnCartChanged.add === 'function'){
      Ecwid.OnCartChanged.add(function(cart){ updateCartDisplay(cart); if(drawer.classList.contains('open')) renderCartToDrawer(cart); });
    } else if(typeof Ecwid.OnCartChanged === 'function'){
      Ecwid.OnCartChanged(function(cart){ updateCartDisplay(cart); if(drawer.classList.contains('open')) renderCartToDrawer(cart); });
    }

    // Initial fetch to populate badge
    try { Ecwid.Cart.get(function(c){ updateCartDisplay(c); }); } catch(e){ safeLog('initial Ecwid.Cart.get failed', e); }
  } catch(err){
    safeLog('error attaching Ecwid handlers', err);
  }
}, 10000);

/* Periodic small-interval refresh for count as backup */
setInterval(function(){
  if(typeof Ecwid !== 'undefined' && Ecwid && Ecwid.Cart && typeof Ecwid.Cart.get === 'function'){
    try{ Ecwid.Cart.get(updateCartDisplay); } catch(e){ /* ignore */ }
  }
}, 3500);

/* Click cart: robustly fetch cart and show drawer */
cartBtn.addEventListener('click', function(){
  whenEcwidReady(async function(){
    try{
      const cart = await fetchCartReliable(10, 350); // up to ~3.5s retries
      renderCartToDrawer(cart || { products: [] });
      openDrawer();
    }catch(e){
      safeLog('error fetching cart on click', e);
      // final fallback: show empty message but still open
      document.getElementById('mini-cart-content').innerHTML = '<h2 style="font-family:Playfair Display,serif;color:var(--primary)">Your Cart</h2><p class="mini-cart-empty">Cart data is loading ‚Äî please try again in a moment.</p>';
      openDrawer();
    }
  }, 10000);
});

/* Expose fetchCartReliable used above */
function fetchCartReliable(maxAttempts, intervalMs){
  return new Promise(function(resolve){
    let attempts = 0;
    (function tryOnce(){
      attempts++;
      try {
        Ecwid.Cart.get(function(cart){
          const hasProducts = cart && Array.isArray(cart.products) && cart.products.length > 0;
          if(hasProducts || attempts >= (maxAttempts || 6)){
            resolve(cart || { products: [], productsQuantity: 0 });
          } else {
            setTimeout(tryOnce, intervalMs || 300);
          }
        });
      } catch(err){
        safeLog('fetchCartReliable catch', err);
        if(attempts >= (maxAttempts || 6)) resolve({ products: [], productsQuantity: 0 });
        else setTimeout(tryOnce, intervalMs || 300);
      }
    })();
  });
}
</script>
</body>
</html>
